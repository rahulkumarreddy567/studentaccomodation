<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import javafx.geometry.Insets?>

<StackPane xmlns:fx="http://javafx.com/fxml" fx:controller="com.pandalodge.controller.DetailController" styleClass="root-pane">
    <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
        <VBox spacing="24" style="-fx-background-color: #f8fafc;">
            <padding>
                <Insets top="24" right="40" bottom="40" left="40" />
            </padding>

            
            <HBox spacing="16" alignment="CENTER_LEFT">
                <Button text="â† Back to Listings" onAction="#back" styleClass="link-button" />
                <Region HBox.hgrow="ALWAYS" />
                <Button fx:id="saveBtn" text="â™¥ Save" onAction="#handleSave" styleClass="button-secondary" />
            </HBox>

            
            <HBox spacing="32">
                
                <VBox spacing="16" prefWidth="520">
                    <StackPane styleClass="detail-image-container">
                        <ImageView fx:id="imageView" fitWidth="520" fitHeight="350" preserveRatio="false" />
                        <Label fx:id="typeBadge" text="Room" styleClass="type-badge" StackPane.alignment="TOP_LEFT" translateX="16" translateY="16"/>
                        <Label fx:id="statusBadge" text="Available" styleClass="status-badge" StackPane.alignment="TOP_RIGHT" translateX="-16" translateY="16"/>
                    </StackPane>

                    
                    <VBox styleClass="card" spacing="12">
                        <Label text="ðŸ“ Location" style="-fx-font-weight: bold; -fx-font-size: 16px;" />
                        <Label fx:id="addressLabel" text="Address" wrapText="true" style="-fx-text-fill: #64748b;" />

                        
                        <StackPane fx:id="mapContainer" prefHeight="200" style="-fx-background-color: #e2e8f0; -fx-background-radius: 8;">
                            <ImageView fx:id="mapImage" fitWidth="488" fitHeight="200" preserveRatio="false" />
                            <Label fx:id="mapPlaceholder" text="ðŸ—ºï¸ Loading map..." style="-fx-font-size: 14px; -fx-text-fill: #64748b;" />
                        </StackPane>

                        <HBox spacing="16">
                            <Label text="ðŸš‡ Near metro" style="-fx-text-fill: #64748b; -fx-font-size: 13px;" />
                            <Label text="ðŸšŒ Bus stops nearby" style="-fx-text-fill: #64748b; -fx-font-size: 13px;" />
                            <Label text="ðŸš¶ Walkable area" style="-fx-text-fill: #64748b; -fx-font-size: 13px;" />
                        </HBox>

                        <Button fx:id="openMapBtn" text="ðŸ—ºï¸ Open in Google Maps" onAction="#openGoogleMaps" styleClass="button-secondary" />
                    </VBox>
                </VBox>

                
                <VBox spacing="20" HBox.hgrow="ALWAYS">
                    
                    <VBox spacing="8">
                        <Label fx:id="titleLabel" text="Room Title" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #1e293b;" />
                        <HBox spacing="16" alignment="CENTER_LEFT">
                            <Label fx:id="priceLabel" text="â‚¬0" style="-fx-font-size: 32px; -fx-text-fill: #6366f1; -fx-font-weight: bold;" />
                            <Label text="/ month" style="-fx-font-size: 16px; -fx-text-fill: #64748b;" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Label fx:id="avgRatingLabel" text="â­ --" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
                            <Label fx:id="reviewCountLabel" text="(0 reviews)" style="-fx-text-fill: #64748b;" />
                        </HBox>
                    </VBox>

                    <Separator />
                    
                    
                    <HBox spacing="24">
                        <VBox alignment="CENTER" spacing="4">
                            <Label text="ðŸ " style="-fx-font-size: 24px;" />
                            <Label fx:id="typeLabel" text="Room" style="-fx-font-weight: bold;" />
                            <Label text="Type" styleClass="muted" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="4">
                            <Label text="ðŸ“" style="-fx-font-size: 24px;" />
                            <Label fx:id="sizeLabel" text="18mÂ²" style="-fx-font-weight: bold;" />
                            <Label text="Size" styleClass="muted" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="4">
                            <Label text="ðŸ›ï¸" style="-fx-font-size: 24px;" />
                            <Label fx:id="furnishedLabel" text="Furnished" style="-fx-font-weight: bold;" />
                            <Label text="Furnishing" styleClass="muted" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="4">
                            <Label text="ðŸ“…" style="-fx-font-size: 24px;" />
                            <Label fx:id="availableInfoLabel" text="Now" style="-fx-font-weight: bold;" />
                            <Label text="Available" styleClass="muted" />
                        </VBox>
                    </HBox>

                    <Separator />

                    
                    <VBox spacing="10">
                        <Label text="About this property" style="-fx-font-weight: bold; -fx-font-size: 18px;" />
                        <Label fx:id="descriptionLabel" text="No description available." wrapText="true" style="-fx-text-fill: #475569; -fx-line-spacing: 4;" />
                    </VBox>

                    
                    <VBox spacing="12">
                        <Label text="Amenities included" style="-fx-font-weight: bold; -fx-font-size: 18px;" />
                        <FlowPane hgap="12" vgap="12">
                            <Label text="âœ“ Furnished" styleClass="amenity-tag" />
                            <Label text="âœ“ WiFi" styleClass="amenity-tag" />
                            <Label text="âœ“ Heating" styleClass="amenity-tag" />
                            <Label text="âœ“ Kitchen Access" styleClass="amenity-tag" />
                            <Label text="âœ“ Washing Machine" styleClass="amenity-tag" />
                            <Label text="âœ“ Bills Included" styleClass="amenity-tag" />
                        </FlowPane>
                    </VBox>

                    
                    <VBox fx:id="ownerInfoBox" spacing="12" styleClass="card" style="-fx-background-color: #ecfdf5;">
                        <Label text="ðŸ‘¤ Property Owner" style="-fx-font-weight: bold; -fx-font-size: 18px; -fx-text-fill: #065f46;" />
                        <HBox spacing="24" alignment="CENTER_LEFT">
                            <VBox spacing="4">
                                <Label text="Name" style="-fx-text-fill: #6b7280; -fx-font-size: 12px;" />
                                <Label fx:id="ownerNameLabel" text="Loading..." style="-fx-font-weight: bold; -fx-text-fill: #1e293b;" />
                            </VBox>
                            <VBox spacing="4">
                                <Label text="Email" style="-fx-text-fill: #6b7280; -fx-font-size: 12px;" />
                                <Label fx:id="ownerEmailLabel" text="Loading..." style="-fx-text-fill: #6366f1;" />
                            </VBox>
                            <VBox spacing="4">
                                <Label text="Phone" style="-fx-text-fill: #6b7280; -fx-font-size: 12px;" />
                            <Label fx:id="ownerPhoneLabel" text="Loading..." style="-fx-text-fill: #1e293b;" />
                        </VBox>
                    </HBox>
                </VBox>

                
                <VBox spacing="12" styleClass="card">
                     <HBox spacing="16" alignment="CENTER_LEFT">
                        <Label text="â­ Reviews" style="-fx-font-weight: bold; -fx-font-size: 18px;" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button text="+ Add Review" onAction="#handleAddReview" styleClass="button-secondary" />
                    </HBox>
                    <VBox fx:id="reviewsContainer" spacing="10">
                        <Label text="Loading reviews..." style="-fx-text-fill: #94a3b8; -fx-font-style: italic;" />
                    </VBox>
                </VBox>

                <Region VBox.vgrow="ALWAYS" />
                
                
                <VBox styleClass="card" spacing="16" style="-fx-background-color: #f1f5f9;">
                    <Label text="ðŸ“… Book Your Stay" style="-fx-font-weight: bold; -fx-font-size: 18px;" />

                    <HBox spacing="20" alignment="CENTER_LEFT">
                        <VBox spacing="6">
                            <Label text="Check-in Date" styleClass="detail-label" />
                            <DatePicker fx:id="startDatePicker" prefWidth="160" promptText="Start date" />
                        </VBox>
                        <VBox spacing="6">
                            <Label text="Check-out Date" styleClass="detail-label" />
                            <DatePicker fx:id="endDatePicker" prefWidth="160" promptText="End date" />
                        </VBox>
                        <VBox spacing="6" alignment="CENTER">
                            <Label text="Duration" styleClass="detail-label" />
                            <Label fx:id="durationLabel" text="-- months" style="-fx-font-weight: bold; -fx-text-fill: #6366f1;" />
                        </VBox>
                        <VBox spacing="6" alignment="CENTER">
                            <Label text="Est. Total" styleClass="detail-label" />
                            <Label fx:id="totalCostLabel" text="â‚¬ --" style="-fx-font-weight: bold; -fx-text-fill: #22c55e; -fx-font-size: 16px;" />
                        </VBox>
                    </HBox>

                    <HBox spacing="16" alignment="CENTER_LEFT">
                        <VBox HBox.hgrow="ALWAYS">
                            <Label text="Ready to book?" style="-fx-font-weight: bold; -fx-font-size: 16px;" />
                            <Label text="Secure your room today" styleClass="muted" />
                        </VBox>
                        <Button fx:id="bookBtn" text="ðŸ”’ Book Now" onAction="#handleBook" styleClass="primary-button" prefWidth="160" prefHeight="45" />
                    </HBox>
                    <Label fx:id="statusLabel" styleClass="error-label" />
                </VBox>
            </VBox>
        </HBox>
    </VBox>
    </ScrollPane>

    
    <VBox fx:id="successOverlay" visible="false" alignment="CENTER" spacing="30" style="-fx-background-color: rgba(255,255,255,0.95);">
        <VBox alignment="CENTER" spacing="15">
            <Label text="ðŸŽ‰" style="-fx-font-size: 80px;" />
            <Label fx:id="successTitle" text="Booking Requested!" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #1e293b;" />
            <Label fx:id="successMessage" text="Your request has been sent to the admin for approval." style="-fx-font-size: 18px; -fx-text-fill: #64748b;" alignment="CENTER" wrapText="true" maxWidth="450" />
        </VBox>
        <HBox spacing="15" alignment="CENTER">
            <Button text="View My Bookings" onAction="#navigateToBookings" styleClass="primary-button" prefWidth="200" />
            <Button text="Continue Browsing" onAction="#back" styleClass="secondary-button" prefWidth="200" />
        </HBox>
    </VBox>
</StackPane>
